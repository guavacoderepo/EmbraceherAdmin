<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courses | EmbraceHer</title>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/modal.css">
    <link rel="stylesheet" href="../styles/authentication.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <link rel="shortcut icon" href="../assets/embrace.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Montez&family=Poppins&family=Tilt+Prism&display=swap" rel="stylesheet">
</head>
<body>
    <nav>
        <h3><a href="./dashboard.html">EmbraceHer</a></h3>
        <div class="admin">
            <div id="adminIcon">
                <a href="./profile.html">
                    <img src="../assets/user.png" alt="admin icon" id="adminImg">
                </a>
            </div>
            <div class="admin-title">
                <p id="ad-name">Loading level...</p>
                <p id="ad-email">loading email...</p>
            </div>
        </div>
    </nav>
    <aside>
        <ul>
            <li><i class="fas fa-tachometer-alt"></i><a href="./dashboard.html">Dashboard</a></li>
            <li><i class="fas fa-user"></i><a href="./users.html">Users</a></li>
            <li id="index"><i class="fas fa-cart-plus"></i><a href="./courses.html">Courses</a></li>
            <li><i class="fas fa-notes-medical"></i><a href="./health-tips.html">Health Tips</a></li>
            <li><i class="fas fa-thumbs-up"></i><a href="./recommendation.html">Recommendation</a></li>
            <li><i class="fas fa-dumbbell"></i><a href="./weight-loss.html">Weight Loss</a></li>
        </ul>
        <button type="button" id="admin-btn">Add an admin</button>
    </aside>
    <section class="main">
        <div class="course-head">
            <h2>Courses</h2>
            <div class="filter-options">
                <button id="all">All</button>
                <button id="beginner">Beginner</button>
                <button id="intermediate">Intermediate</button>
                <button id="expert">Expert</button>
                <input type="search" name="" id="search" placeholder="search title...">
            </div>
        </div>
        <div id="modal">
            <div id="modal-content">
                <span id="close-button" style="display: none;">×</span>
                <form action="">
                    <h1>ADD ADMIN <br><span>Fill in the admin details.</span></h1>
                    <section class="inputBox">
                        <input type="email" name="" id="admin-email" required>
                        <span>Email address</span>
                    </section>
                    <section class="inputBox">
                        <input type="number" name="" min="1" max="10" id="admin-level" required>
                        <span>Admin level</span>
                    </section>
                    <section class="inputBox">
                        <input type="password" name="" id="admin-pwd" required>
                        <span>Password</span>
                    </section>
                    <div>
                        <button type="submit" id="signup">SIGNUP</button>
                    </div>
                </form>
            </div>
        </div>
        <main>
            <div class="modal">
                <div class="modal-content">
                    <span class="close-button">×</span>
                    <label for="table-title">Title</label><br>
                    <input type="text" id="table-title" required><br><br>
                    <label for="table-category">Category</label><br>
                    <select id="table-category" required>
                        <option value="">Select category:</option>
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Expert">Expert</option>
                    </select><br><br>
                    <label for="table-subcategory">SubCategory</label><br>
                    <select id="table-subcategory" required>
                        <option value="">Select sub-category:</option>
                        <option value="Ab">Ab</option>
                        <option value="Butt">Butt</option>
                        <option value="Leg">Leg</option>
                        <option value="Full">Full</option>
                        <option value="Arm">Arm</option>
                        <option value="Cardio">Cardio</option>
                    </select><br><br>
                    <label for="table-description">Description</label><br>
                    <textarea id="table-description" cols="70" rows="2" required></textarea><br><br>
                    <label for="table-image-src">ImageUrl</label><br>
                    <input type="text" id="table-image-src" required><br><br>
                    <button>Save</button>
                </div>
            </div>
            <table id="course-table">
                <tr>
                    <th>Image</th>
                    <th>Title</th>
                    <th>Category</th>
                    <th>SubCategory</th>
                    <th>Description</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td><img src="../assets/embrace.png" alt="course image" id="course-image"></td>
                    <td>Forward at hips</td>
                    <td>Beginner</td>
                    <td>Full</td>
                    <td>Stand with your full hip-width apart</td>
                    <td><i class="fas fa-pen" title="Edit"></i><i class="fas fa-regular fa-trash" title="Delete"></i></td>
                </tr>
                <tr>
                    <td><img src="../assets/embrace.png" alt="course image" id="course-image"></td>
                    <td>For hips</td>
                    <td>Intermediate</td>
                    <td>Ab</td>
                    <td>Stand with your full hip-width apart</td>
                    <td><i class="fas fa-pen" title="Edit"></i><i class="fas fa-regular fa-trash" title="Delete"></i></td>
                </tr>
                <tr>
                    <td><img src="../assets/embrace.png" alt="course image" id="course-image"></td>
                    <td>Forward</td>
                    <td>Expert</td>
                    <td>Cardio</td>
                    <td>Stand with your full hip-width apart</td>
                    <td><i class="fas fa-pen" title="Edit"></i><i class="fas fa-regular fa-trash" title="Delete"></i></td>
                </tr>
                <tr>
                    <td><img src="../assets/embrace.png" alt="course image" id="course-image"></td>
                    <td>Forward at the hips</td>
                    <td>Beginner</td>
                    <td>Butt</td>
                    <td>Stand with your full hip-width apart</td>
                    <td><i class="fas fa-pen" title="Edit"></i><i class="fas fa-regular fa-trash" title="Delete"></i></td>
                </tr>
                <tr>
                    <td><img src="../assets/embrace.png" alt="course image" id="course-image"></td>
                    <td>Forward the hips</td>
                    <td>Intermediate</td>
                    <td>Leg</td>
                    <td>Stand with your full hip-width apart</td>
                    <td><i class="fas fa-pen" title="Edit"></i><i class="fas fa-regular fa-trash" title="Delete"></i></td>
                </tr>
                <tr>
                    <td><img src="../assets/embrace.png" alt="course image" id="course-image"></td>
                    <td>hips</td>
                    <td>Expert</td>
                    <td>Arm</td>
                    <td>Stand with your full hip-width apart</td>
                    <td><i class="fas fa-pen" title="Edit"></i><i class="fas fa-regular fa-trash" title="Delete"></i></td>
                </tr>
                <tr>
                    <td><img src="../assets/embrace.png" alt="course image" id="course-image"></td>
                    <td>Forward hips</td>
                    <td>Beginner</td>
                    <td>Full</td>
                    <td>Stand with your full hip-width apart</td>
                    <td><i class="fas fa-pen" title="Edit"></i><i class="fas fa-regular fa-trash" title="Delete"></i></td>
                </tr>
            </table>
        </main>
    </section>

    <span id="add" title="Upload document">+</span>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
        // Get the token from localStorage
        const token = sessionStorage.getItem('token');

        console.log("Token from sessionStorage:", token);

        if (token) {
            const apiUrl = "https://embraceher.onrender.com";
            const endpoint = "/api/v1/admin/me";
            const url = apiUrl + endpoint;

            fetch(url, {
                method: "GET",
                headers: {
                    "Authorization": `Bearer ${token}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Request failed with status: ${response.status}`);
                }
                return response.json();
            })
            .then(user => {
                console.log("User Data:", user);
                const adName = document.getElementById('ad-name');
                const adEmail = document.getElementById('ad-email');

                adName.innerHTML = 'Admin' + ' ' + '<b>' + 'Level' + ' ' + user.data.level + '</b>';
                adEmail.innerHTML = user.data.email;
                adEmail.style.fontSize = '12px';
            })
            .catch(error => {
                console.error("Error:", error);
            });
        }
    });
    </script>
    
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script> 
    <script src="../scripts/filter.js"></script>
    <script src="../scripts/upload.js"></script>
    <script src="../scripts/modal.js"></script>
</body>
</html>